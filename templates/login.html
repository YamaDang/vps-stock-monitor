<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>管理员登录</title>
    <!-- 确保Element Plus样式和脚本正确引入，版本兼容 -->
    <link rel="stylesheet" href="https://unpkg.com/element-plus@2.3.8/dist/index.css">
</head>
<body>
    <div id="app" style="max-width: 300px; margin: 100px auto; padding: 20px; border: 1px solid #eee; border-radius: 5px;">
        <h2 style="text-align: center;">管理员登录</h2>
        <!-- 表单区域 -->
        <el-form label-position="top" style="margin-top: 20px;">
            <!-- 用户名输入框：确保无disabled属性，v-model正确绑定 -->
            <el-form-item label="用户名">
                <el-input 
                    v-model="username" 
                    placeholder="请输入用户名"
                    :disabled="false"  <!-- 明确禁用禁用状态 -->
                ></el-input>
            </el-form-item>
            <!-- 密码输入框：同样确保可交互 -->
            <el-form-item label="密码">
                <el-input 
                    v-model="password" 
                    type="password" 
                    placeholder="请输入密码"
                    :disabled="false"
                ></el-input>
            </el-form-item>
            <el-button type="primary" @click="login" style="width: 100%;">登录</el-button>
        </el-form>
        <!-- 错误提示 -->
        <div v-if="message" style="margin-top: 10px; color: red; text-align: center;">{{ message }}</div>
    </div>

    <!-- 引入依赖：Vue 3 + Element Plus + Axios，确保版本兼容 -->
    <script src="https://unpkg.com/vue@3.2.47/dist/vue.global.js"></script>
    <script src="https://unpkg.com/element-plus@2.3.8/dist/index.full.js"></script>
    <script src="https://unpkg.com/axios@0.27.2/dist/axios.min.js"></script>
    
    <script>
        // 确保Vue实例正确初始化，无语法错误
        const { createApp } = Vue;
        createApp({
            data() {
                return {
                    username: '',  // 初始化空字符串，避免绑定问题
                    password: '',
                    message: ''
                }
            },
            methods: {
                login() {
                    // 简单验证输入不为空
                    if (!this.username || !this.password) {
                        this.message = '请输入用户名和密码';
                        return;
                    }
                    // 发送登录请求
                    axios.post('/login', new URLSearchParams({
                        username: this.username,
                        password: this.password
                    }))
                    .then(response => {
                        window.location.href = '/admin';  // 登录成功跳转
                    })
                    .catch(error => {
                        this.message = '用户名或密码不正确';
                    });
                }
            }
        }).use(ElementPlus).mount('#app');  // 确保Element Plus被正确注册
    </script>
</body>
</html>
